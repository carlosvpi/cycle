var _extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t};function _objectWithoutProperties(t,e){var r={};for(var n in t)e.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n]);return r}var getKey=function(t,e){return t.key||e},mount=function t(e,r,n){if(r&&r.mvcData===e)return r;var o=r&&r.tagName||null,i=r&&r.mvcData&&r.mvcData.children||[],a=e.el,u=e.children,c=e.__proto__,l=_objectWithoutProperties(e,["el","children","__proto__"]),d=o===a,s=d?r:c.create.apply(e);if(e.node=s,s.mvcData=e,c.hasAttributes){for(var h=Object.keys(l),v=h.length,f=s.getAttributeNames(),p=f.length,_=void 0,m=void 0,y=0;y<p;y++)m=(_=f[y]).charAt(0)===_.charAt(0).toUpperCase(),h.includes(_)&&void 0!==l[_]||(m?s[_.toLowerCase()]=void 0:s.removeAttribute(_));for(var g=0;g<v;g++)m=(_=h[g]).charAt(0)===_.charAt(0).toUpperCase(),void 0!==l[_]?m?s[_.toLowerCase()]=l[_]:s.setAttribute(_,l[_]):m&&(s[_.toLowerCase()]=void 0)}if(c.canHaveChildren){var C=u.length,w=u.map(getKey),b=u.length,P=i.map(getKey),A=i.length,E=u.reduce(function(t,e,r){return t[e.key||r]=e,t},{}),x=void 0;l.id;for(var O=0;O<A;O++)x=i[O].key||O,w.includes(x)?t(E[x],d?i[O].node:null,s):s.removeChild(i[O].node);for(var S=0;S<b;S++)x=u[S].key||S,P.includes(x)||t(E[x],null,s);for(var T=0;T<C;T++)s.appendChild(u[T].node)}return r?d||n.replaceChild(s,r):n.appendChild(s),l.onmount&&l.onmount(s,e),s},ElProto={create:function(){return document.createElement(this.el)},mount:function(t){t.appendChild(this.node)},canHaveChildren:!0,hasAttributes:!0},El=function(t,e,r){var n=_extends({el:t,children:e},r);return n.__proto__=ElProto,n},TProto={create:function(){return document.createTextNode(this.text)},mount:function(t){t.appendTextNode(this.node)},canHaveChildren:!1,hasAttributes:!1},T=function(t){var e={text:t};return e.__proto__=TProto,e},SVGElProto={create:function(t){return t.appendElementNS("http://www.w3.org/2000/svg",this.el)},mount:function(t){t.appendChild(this.node)},canHaveChildren:!0,hasAttributes:!0},SVGEl=function(t,e,r){var n=_extends({el:t,children:e},r);return n.__proto__=SVGElProto,n},ctrlProto={getState:function(){return this.state},action:function(t){var e=this,r=function t(r){return t.onlyUpdate(r),e.render&&e.render()};return r.definition=t,r.onlyUpdate=function(r){return e.state=t(r)(e.state)},r},getRender:function(t,e){var r=this,n=null;return this.render=this.render||function(){var o=t(r.state);return new Promise(function(t,r){window.requestAnimationFrame(function(){(n=mount(o,n,e))?t(n):r()})})}},component:function(t){var e={};return function(r){var n=JSON.stringify(r);return void 0!==e[n]?e[n]:e[n]=t(r)}}},getCtrl=function(t){var e={state:t};return e.__proto__=ctrlProto,e},cycle={getCtrl:getCtrl,El:El,T:T,SVGEl:SVGEl};"undefined"!=typeof module?module.exports=cycle:window.cycle=cycle;